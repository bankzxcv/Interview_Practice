name: Environment Secrets

on:
  workflow_dispatch:
    inputs:
      environment:
        description: 'Deployment environment'
        required: true
        type: choice
        options:
          - development
          - staging
          - production

jobs:
  deploy:
    runs-on: ubuntu-latest
    environment: ${{ inputs.environment }}

    steps:
    - name: Checkout code
      uses: actions/checkout@v4

    - name: Deploy to environment
      env:
        API_URL: ${{ secrets.API_URL }}
        API_KEY: ${{ secrets.API_KEY }}
        DATABASE_URL: ${{ secrets.DATABASE_URL }}
      run: |
        echo "Deploying to ${{ inputs.environment }}"
        echo "API URL is set: ${API_URL:+yes}"
        echo "API key is set: ${API_KEY:+yes}"

        # Deployment logic here
        # The secrets will automatically use environment-specific values

    - name: Verify deployment
      run: |
        echo "Deployment to ${{ inputs.environment }} complete"
